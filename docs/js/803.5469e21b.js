"use strict";(globalThis["webpackChunkprototipo"]=globalThis["webpackChunkprototipo"]||[]).push([[803],{3803:(e,l,o)=>{o.r(l),o.d(l,{default:()=>D});var t=o(9835);const s=(0,t._)("span",{style:{"font-size":"18px","font-weight":"700"}},"App de Gerenciamento",-1);function a(e,l,o,a,n,i){const r=(0,t.up)("q-card-section"),u=(0,t.up)("q-btn"),c=(0,t.up)("q-file"),h=(0,t.up)("q-linear-progress"),d=(0,t.up)("q-inner-loading"),E=(0,t.up)("q-table"),m=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(m,{class:"card q-ma-md bg-blue flex justify-center text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{style:{"min-width":"500px"},class:"bg-white text-grey-8"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[s])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{disable:n.loading,"onUpdate:modelValue":[i.updateFiles,l[0]||(l[0]=e=>n.xslxFile=e)],modelValue:n.xslxFile,label:"Selecione o arquivo .xlsx",filled:"",clearable:"",accept:".xlsx",style:{"min-width":"300px"}},(0,t.Nv)({_:2},[i.canUpload&&!n.xslxJson?{name:"after",fn:(0,t.w5)((()=>[(0,t.Wm)(u,{color:"primary",dense:"",icon:"cloud_upload",round:"",onClick:i.onFileChange},null,8,["onClick"])])),key:"0"}:void 0]),1032,["disable","onUpdate:modelValue","modelValue"])])),_:1}),n.showTable?((0,t.wg)(),(0,t.j4)(r,{key:0},{default:(0,t.w5)((()=>[n.jsonFromServeFile?((0,t.wg)(),(0,t.j4)(u,{key:0,class:"q-mb-sm",color:"primary",icon:"download",onClick:l[1]||(l[1]=e=>i.downloadXLSX(n.jsonFromServeFile)),label:"Baixar .xlsx gerado"})):((0,t.wg)(),(0,t.j4)(u,{key:1,onClick:i.runSeverUpload,color:"positive",class:"q-mb-sm",icon:"play_arrow",label:"Executar"},null,8,["onClick"])),(0,t.Wm)(h,{size:"15px",value:n.progress,color:"positive",class:"q-mt-sm q-mb-sm"},null,8,["value"]),(0,t.Wm)(E,{style:{"max-width":"800px"},rows:n.rows,loading:n.loading,title:"Formato tabela",columns:n.columns,"row-key":"name"},{loading:(0,t.w5)((()=>[(0,t.Wm)(d,{showing:"",color:"primary"})])),_:1},8,["rows","loading","columns"]),n.showTable?((0,t.wg)(),(0,t.j4)(E,{key:2,style:{"max-width":"800px"},rows:n.rows,grid:"",loading:n.loading,class:"q-mt-md",title:"Formato cards",columns:n.columns,"row-key":"name"},{loading:(0,t.w5)((()=>[(0,t.Wm)(d,{showing:"",color:"primary"})])),_:1},8,["rows","loading","columns"])):(0,t.kq)("",!0)])),_:1})):(0,t.kq)("",!0)])),_:1})])),_:1})])),_:1})}o(9665);var n=o(1708),i=o(9302);const r=o(4701),u=((0,i.Z)(),{name:"App1",computed:{canUpload(){return null!==this.xslxFile}},methods:{updateFiles(){this.xslxFile=null,this.columns=[],this.showTable=!1,this.rows=[],this.xslxJson=null,this.jsonFromServeFile=null,this.loading=!1,this.progress=0},convertXLSXtoJson(e){const l=[];for(let o=1;o<e.length;o++)l.push({id:"LOTE"===e[0][0]?e[o][0]:null,yellowSubBatch:{id:"AMARELO"===e[0][4]?e[o][4]:null,avgWeight:"PESO MEDIO AMARELO"===e[0][6]?e[o][6]:null,type:1,quantity:"QUANTIDADE AMARELO"===e[0][5]?e[o][5]:null},greenSubBatch:{id:"VERDE"===e[0][1]?e[o][1]:null,avgWeight:"PESO MEDIO VERDE"===e[0][3]?e[o][3]:null,type:1,quantity:"QUANTIDADE VERDE"===e[0][2]?e[o][2]:null}});this.xslxJson=l},convertJsonToXLSX(e){const l=[];for(let o=0;o<e.length;o++)l.push({LOTE:e[o].id,AMARELO:e[o].yellowSubBatch.id,"QUANTIDADE AMARELO":e[o].yellowSubBatch.quantity,"PESO MEDIO AMARELO":e[o].yellowSubBatch.avgWeight,VERDE:e[o].greenSubBatch.id,"QUANTIDADE VERDE":e[o].greenSubBatch.quantity,"PESO MEDIO VERDE":e[o].greenSubBatch.avgWeight,DIFERENCA:e[o].quantityDiff,"DIFERENCA PESO":e[o].weightDiff});return l},downloadXLSX(e){const l=r.utils.json_to_sheet(this.convertJsonToXLSX(e)),o=r.utils.book_new();r.utils.book_append_sheet(o,l,"Tabela Gerada"),r.writeFile(o,"tabela_gerada.xlsx")},createTableFromXLSX(e){let l={};e[0].forEach((e=>{this.columns.push({name:e,required:!0,label:e,align:"left",field:e,sortable:!0})}));for(let o=1;o<e.length;o++)e[o].forEach(((e,o)=>{l[this.columns[o].name]=e})),this.rows.push(l),l={};this.showTable=!0},createTableFromJson(e){this.columns=[],this.rows=[];const l=["LOTE","AMARELO","QUANTIDADE AMARELO","PESO MEDIO AMARELO","VERDE","QUANTIDADE VERDE","PESO MEDIO VERDE","DIFERENCA","DIFERENCA PESO"];l.forEach((e=>{this.columns.push({name:e,required:!0,label:e,align:"left",field:e,sortable:!0})})),e.forEach((e=>{this.rows.push({LOTE:e.id,AMARELO:e.yellowSubBatch.id,"QUANTIDADE AMARELO":e.yellowSubBatch.quantity,"PESO MEDIO AMARELO":e.yellowSubBatch.avgWeight,VERDE:e.greenSubBatch.id,"QUANTIDADE VERDE":e.greenSubBatch.quantity,"PESO MEDIO VERDE":e.greenSubBatch.avgWeight,DIFERENCA:e.quantityDiff,"DIFERENCA PESO":e.weightDiff})})),this.showTable=!0},runSeverUpload(){return this.loading=!0,new Promise((()=>{this.$axios.post("/api/gripenew/optimize",this.xslxJson).then((e=>{this.jsonFromServeFile=e.data,this.createTableFromJson(this.jsonFromServeFile),this.loading=!1,this.progress=1})).catch((e=>{e&&(this.loading=!1,this.$q.notify({message:"Erro na Execução !",icon:"error",caption:"Verifique se o arquivo .xlsx está correto.",color:"negative"})),console.log(e)}))}))},onFileChange(){(0,n.Z)(this.xslxFile).then((e=>{this.createTableFromXLSX(e),this.convertXLSXtoJson(e)}))}},data(){const e=null,l=[],o=!1,t=[],s=null,a=null,n=!1;return{xslxFile:e,columns:l,rows:t,showTable:o,xslxJson:s,jsonFromServeFile:a,loading:n,progress:0}}});var c=o(1639),h=o(4458),d=o(3190),E=o(2427),m=o(9379),g=o(8289),p=o(1874),w=o(854),b=o(9984),A=o.n(b);const x=(0,c.Z)(u,[["render",a]]),D=x;A()(u,"components",{QCard:h.Z,QCardSection:d.Z,QFile:E.Z,QBtn:m.Z,QLinearProgress:g.Z,QTable:p.Z,QInnerLoading:w.Z})}}]);